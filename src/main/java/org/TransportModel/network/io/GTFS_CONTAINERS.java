package org.TransportModel.network.io;

import java.util.HashMap;

public class GTFS_CONTAINERS
{
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    /** */
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    static class Route
    {
        public int type;
        public String name;
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        /** */
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        public Route(int type, String name)
        {
            this.type = type;
            this.name = name;
        }
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    /** */
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    static class Trip
    {
        public String id;
        public HashMap<String, TripStop> stops;
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        /** */
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        public Trip(String id)
        {
            this.id = id;
            this.stops = new HashMap<>();
        }
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    /** */
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    static class TripStop
    {
        private final String id;
        private final int sequence;
        private final int arrivalTime;
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        /** */
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        public TripStop(String id, int sequence, int arrivalTime)
        {
            this.id = id;
            this.sequence = sequence;
            this.arrivalTime = arrivalTime;
        }
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        /** */
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        public String getId(){return this.id;}
        public int getSequence(){return this.sequence;}
        public int getArrivalTime(){return this.arrivalTime;}
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    /** */
    ///////////////////////////////////////////////////////////////////////////////////////////////////
    static class Section
    {
        private final String toId;
        private final String fromId;
        private int traversalCount;
        private int firstTraversal;
        private int lastTraversal;
        private int averageTraversalTime;
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        /** */
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        public Section(String fromId, String toId)
        {
            this.fromId = fromId;
            this.toId = toId;
            this.traversalCount = 0;
            this.averageTraversalTime = 0;
            this.firstTraversal = Integer.MAX_VALUE;
            this.lastTraversal = Integer.MIN_VALUE;
        }
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        /** */
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        public void addTraversal(int fromArrivalTime, int toArrivalTime)
        {
            firstTraversal = Math.min(fromArrivalTime, firstTraversal);
            lastTraversal = Math.max(fromArrivalTime, lastTraversal);
            int traversalTime = Math.max(29,(toArrivalTime - fromArrivalTime));
            this.averageTraversalTime = (averageTraversalTime*traversalCount+traversalTime)/(traversalCount+1);
            this.traversalCount++;
        }
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        /** */
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        public int getAverageFrequency(){return (this.lastTraversal-this.firstTraversal)/this.traversalCount;}
        public int getAverageTraversalTime() {return this.averageTraversalTime;}
        public int getFirstTraversal(){return this.firstTraversal;}
        public int getLastTraversal(){return this.lastTraversal;}
        public String getFromId(){return this.fromId;}
        public String getToId(){return this.toId;}
    }
}
